@page "/colecao/{Id:int}"
@inject ColecaoApiService colecaoService
@inject NavigationManager navManager

<GenealogiaColecao IdColecaoMaior="colecao.IdColecaoMaior" OnClickCallback="NavegarPara" />

<h3>Coleção @colecao.Nome</h3>
<p>@colecao.Descricao</p>
<SearchAndCreateColecao IdColecaoPrincipal="@Id" QuantidadeMaximaDeColunas="6" />
<br />
<SearchAndCreateItem IdColecao="@Id" QuantidadeDeColunas="4" QuantidadeMaximaDeColunas="6" />

@code {
	[Parameter]
	public int Id { get; set; }

	private ColecaoVM colecao = new ColecaoVM();

	async Task LoadColecao()
	{
		try
		{
			colecao = await colecaoService.GetById(Id);
		}
		catch (Exception ex)
		{

		}
	}

	private async Task NavegarPara(ColecaoBasicVM colecao)
	{
		navManager.NavigateTo($"/colecao/{colecao.Id}");
	}

	protected override async Task OnParametersSetAsync()
	{
		colecao = new ColecaoVM();
		await LoadColecao();
	}
}
